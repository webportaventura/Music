<head>
<meta charset="UTF-8">
<meta name="robots" content="noindex, nofollow">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Warmth Of Christmas</title>

<style>
body {
  margin:0;
  padding:0;
  font-family:'Montserrat', sans-serif;
  color:white;
  background:linear-gradient(to bottom,
    rgba(120,40,40,0.55),
    rgba(40,15,15,0.85),
    rgba(15,8,8,1)
  );
  background-attachment:fixed;
}

/* PORTADA + INFO ÁLBUM */
.album {
  max-width:90%;
  margin:20px auto 10px auto;
  padding:0;
}

.cover {
  width:100%;
  max-width:310px;
  border-radius:12px;
  display:block;
  margin:auto;
  box-shadow:0 18px 38px rgba(0,0,0,0.55);
}

.album-info {
  width:80%;
  min-width:380px;
  margin-top:40px;
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  background:transparent;
}

.album-text {
  text-align:left;
}

.album-title {
  font-size:150%;
  font-weight:700;
  margin-bottom:8px;
}

.album-year {
  font-size:90%;
  color:white;
  margin-bottom:4px;
}

.album-count {
  font-size:90%;
  color:#ccc;
}

/* BOTÓN REPRODUCIR TODO */
.playall-btn {
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 18px;
  border-radius:40px;
  border:none;
  cursor:pointer;
  color:white;
  font-weight:600;
  font-size:90%;
  background:linear-gradient(135deg, #552222, #221111);
  box-shadow:0 6px 14px rgba(0,0,0,0.45);
}

.playall-btn svg {
  width:20px;
  height:20px;
  fill:white;
}

/* LISTADO DE CANCIONES */
.track {
  display:flex;
  align-items:center;
  padding:8px 8px;
  margin:10px auto;
  width:60%;
  min-width:340px;
  border-radius:0;
  cursor:pointer;
  border:1px solid rgba(255,255,255,0.08);
  background:linear-gradient(
    to bottom,
    rgba(255,255,255,0.02),
    rgba(255,255,255,0.11)
  );
}

.track:hover {
  background:linear-gradient(
    to bottom,
    rgba(255,255,255,0.03),
    rgba(255,255,255,0.15)
  );
}

.track-info {
  display:flex;
  align-items:center;
  gap:20px;
  flex:1;
}

.track img {
  width:55px;
  height:55px;
  border-radius:6px;
  object-fit:cover;
  box-shadow:0 6px 14px rgba(0,0,0,0.55);
}

.track-title {
  font-weight:600;
  font-size:95%;
  margin-bottom:4px;
}

.track-sub {
  font-size:80%;
  color:#ccc;
}

.track-duration {
  font-size:80%;
  color:white;
  margin-right:10px;
}

/* BOTÓN DESCARGA A */
.download-btn {
  width:36px;
  height:36px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:transparent;
  border:none;
  cursor:pointer;
}

.download-btn svg {
  width:26px;
  height:26px;
  stroke:white;
  stroke-width:2;
  fill:none;
}

/* MINI‑PLAYER */
#floating-player {
  position:fixed;
  bottom:-200px;
  left:0;
  width:100%;
  background:rgba(0,0,0,0.6);
  backdrop-filter:blur(14px);
  padding:16px;
  box-sizing:border-box;
  border-top:1px solid rgba(255,255,255,0.1);
  transition:bottom .35s ease;
  z-index:999;
}

#fp-collapse {
  background:transparent;
  border:none;
  cursor:pointer;
  padding:4px;
  position:absolute;
  top:4px;
  left:50%;
  transform:translateX(-50%);
  display:none;
}

#fp-close {
  position:absolute;
  right:8px;
  top:8px;
  background:transparent;
  border:none;
  color:white;
  font-size:20px;
  cursor:pointer;
}

.fp-content {
  display:flex;
  align-items:center;
  gap:14px;
  margin-top:20px;
}

#fp-cover {
  width:66px;
  height:66px;
  border-radius:8px;
  object-fit:cover;
  box-shadow:0 6px 14px rgba(0,0,0,0.55);
}

.fp-text {
  flex:1;
  text-align:left;
}

#fp-title {
  font-weight:700;
  font-size:16px;
  margin-bottom:4px;
}

.fp-sub1,
.fp-sub2,
.fp-sub3 {
  font-size:80%;
  color:#ccc;
  margin-bottom:2px;
}

/* CONTROLES */
.fp-controls-row {
  display:flex;
  justify-content:center;
  align-items:center;
  gap:26px;
  margin-top:12px;
}

.fp-btn {
  background:transparent;
  border:none;
  cursor:pointer;
}

.fp-btn svg {
  width:26px;
  height:26px;
  fill:white;
  opacity:0.9;
}

.fp-btn.toggle.active svg {
  fill:#ffd966;
  stroke:#ffd966;
  opacity:1;
}

/* PLAY CON CÍRCULO OSCURO */
.fp-play-circle {
  width:58px;
  height:58px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg, #331515, #110707);
  box-shadow:0 6px 14px rgba(0,0,0,0.55);
}

.fp-play-circle svg {
  width:28px;
  height:28px;
  fill:white;
}

/* PROGRESO */
#fp-progress-container {
  width:100%;
  height:8px;
  background:rgba(255,255,255,0.12);
  border-radius:4px;
  margin-top:14px;
  position:relative;
  cursor:pointer;
}

#fp-progress {
  height:100%;
  width:0%;
  background:rgba(255,255,255,0.8);
}

#fp-progress-thumb {
  position:absolute;
  top:50%;
  left:0%;
  transform:translate(-50%, -50%);
  width:12px;
  height:12px;
  background:white;
  border-radius:50%;
}

/* EXPANDIDO */
#floating-player.expanded {
  height:78vh;
  border-radius:20px 20px 0 0;
  padding-top:40px;
}

#floating-player.expanded #fp-collapse {
  display:block;
}

#floating-player.expanded .fp-content {
  flex-direction:column;
  align-items:center;
  text-align:center;
}

#floating-player.expanded #fp-cover {
  width:240px;
  height:240px;
  margin-bottom:10px;
}

#floating-player.expanded .fp-text {
  text-align:center;
}

#floating-player.expanded .fp-controls-row {
  margin-top:20px;
}

#floating-player.expanded #fp-progress-container {
  margin-top:20px;
}

.bottom-spacer {
  height:260px;
}
</style>






<body>

<div class="album">
  <img class="cover" src="../img/portadaWarmthOfChristmas.png">

  <div class="album-info">
    <div class="album-text">
      <div class="album-title">The Warmth Of Christmas</div>
      <div class="album-year">2025</div>
      <div class="album-count">8 canciones</div>
    </div>

    <button id="play-all" class="playall-btn">
      <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
      Reproducir todo
    </button>
  </div>
</div>

<!-- LISTADO -->
<div class="track" data-file="01._So_This_Is_Christmas.MP3" data-cover="../img/portadaWarmthOfChristmas.png">
  <div class="track-info">
    <img src="../img/portadaWarmthOfChristmas.png">
    <div>
      <div class="track-title">So This Is Christmas</div>
      <div class="track-sub">Contiene: 1</div>
    </div>
  </div>

  <div class="track-duration">00:00</div>

  <button class="download-btn" onclick="event.stopPropagation()">
    <svg viewBox="0 0 24 24">
      <path d="M12 3v12m0 0l-5-5m5 5l5-5" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M5 19h14" stroke-linecap="round"/>
    </svg>
  </button>
</div>

<div class="track" data-file="02.%20The%20Warmth%20Of%20Christmas.MP3" data-cover="../img/portadaWarmthOfChristmas.png">
  <div class="track-info">
    <img src="../img/portadaWarmthOfChristmas.png">
    <div>
      <div class="track-title">The Warmth Of Christmas</div>
      <div class="track-sub">Contiene: 2</div>
    </div>
  </div>

  <div class="track-duration">00:00</div>

  <button class="download-btn" onclick="event.stopPropagation()">
    <svg viewBox="0 0 24 24">
      <path d="M12 3v12m0 0l-5-5m5 5l5-5" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M5 19h14" stroke-linecap="round"/>
    </svg>
  </button>
</div>

<!-- MINI‑PLAYER -->
<div id="floating-player">

  <button id="fp-collapse">
    <svg viewBox="0 0 24 24">
      <path d="M6 9l6 6 6-6" stroke="white" stroke-width="2" fill="none" stroke-linecap="round"/>
    </svg>
  </button>

  <button id="fp-close">✕</button>

  <div class="fp-content">
    <img id="fp-cover" src="../img/portadaWarmthOfChristmas.png">

    <div class="fp-text">
      <div id="fp-title">Reproduciendo...</div>
      <div class="fp-sub1">Álbum: The Warmth Of Christmas (2025)</div>
      <div class="fp-sub2"></div>
      <div class="fp-sub3"></div>
    </div>
  </div>

  <div class="fp-controls-row">

    <button id="fp-shuffle" class="fp-btn toggle">
      <svg viewBox="0 0 24 24">
        <path d="M4 4c5 0 7 5 10 10s5 6 6 6" stroke="white" stroke-width="2" fill="none" stroke-linecap="round"/>
        <path d="M20 4l-4 4 4 4" stroke="white" stroke-width="2" fill="none" stroke-linecap="round"/>
        <path d="M4 20l4-4-4-4" stroke="white" stroke-width="2" fill="none" stroke-linecap="round"/>
      </svg>
    </button>

    <button id="fp-prev" class="fp-btn">
      <svg viewBox="0 0 24 24"><path d="M6 5v14h2V5H6zm3 7l8 7V5l-8 7z"/></svg>
    </button>

    <button id="fp-play" class="fp-btn fp-play-circle">
      <svg id="fp-play-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
    </button>

    <button id="fp-next" class="fp-btn">
      <svg viewBox="0 0 24 24"><path d="M16 5v14h-2V5h2zM6 5v14l8-7L6 5z"/></svg>
    </button>

    <button id="fp-repeat" class="fp-btn toggle">
      <svg viewBox="0 0 24 24">
        <path d="M7 7h9v2l3-3-3-3v2H6a3 3 0 0 0-3 3v4h2V8a1 1 0 0 1 1-1zm10 10H8v-2l-3 3 3 3v-2h10a3 3 0 0 0 3-3v-4h-2v4a1 1 0 0 1-1 1z"/>
      </svg>
    </button>

  </div>

  <audio id="player"></audio>

  <div id="fp-progress-container">
    <div id="fp-progress"></div>
    <div id="fp-progress-thumb"></div>
  </div>

</div>

<div class="bottom-spacer"></div>

</body>





<script>
const audioBasePath = "../audio/Warmth_Of_Christmas/";
const defaultCover  = "../img/portadaWarmthOfChristmas.png";

const trackElements = Array.from(document.querySelectorAll(".track"));
let currentIndex = -1;
let repeat = false;
let shuffle = false;
let isDraggingProgress = false;

const player = document.getElementById("player");
const floatingPlayer = document.getElementById("floating-player");
const fpTitle = document.getElementById("fp-title");
const fpCover = document.getElementById("fp-cover");
const fpPlayBtn = document.getElementById("fp-play");
const fpPlayIcon = document.getElementById("fp-play-icon");
const fpRepeatBtn = document.getElementById("fp-repeat");
const fpShuffleBtn = document.getElementById("fp-shuffle");
const fpProgress = document.getElementById("fp-progress");
const fpProgressThumb = document.getElementById("fp-progress-thumb");
const fpProgressContainer = document.getElementById("fp-progress-container");
const fpCollapse = document.getElementById("fp-collapse");
const fpClose = document.getElementById("fp-close");

const fpSub2 = document.querySelector(".fp-sub2");
const fpSub3 = document.querySelector(".fp-sub3");

const playAllBtn = document.getElementById("play-all");

/* CLICK EN CANCIONES */
trackElements.forEach((trackEl, index) => {
  trackEl.addEventListener("click", () => playIndex(index, "forward"));
});

/* DATOS */
function getTrackData(index){
  const el = trackElements[index];
  return {
    file: el.dataset.file,
    cover: el.dataset.cover || defaultCover,
    title: el.querySelector(".track-title").textContent.trim(),
    contiene: el.querySelector(".track-sub").textContent.trim(),
    duracion: el.querySelector(".track-duration").textContent.trim()
  };
}

/* REPRODUCIR */
function playIndex(index, direction="forward"){
  currentIndex = index;
  const track = getTrackData(index);

  fpTitle.textContent = track.title;
  fpCover.src = track.cover;

  fpSub2.textContent = track.contiene;
  fpSub3.textContent = "Duración: " + track.duracion;

  player.src = audioBasePath + track.file;
  player.play();
  updatePlayIcon(true);

  setDynamicGradient(track.cover);

  floatingPlayer.style.bottom = "0px";
}

/* BOTÓN REPRODUCIR TODO */
playAllBtn.addEventListener("click", () => {
  playIndex(0, "forward");
});

/* CERRAR */
fpClose.addEventListener("click", () => {
  player.pause();
  floatingPlayer.style.bottom = `-${floatingPlayer.offsetHeight}px`;
});

/* COLAPSAR */
fpCollapse.addEventListener("click", (e) => {
  e.stopPropagation();
  floatingPlayer.classList.remove("expanded");
});

/* OSCURECER COLOR */
function darkenColor(r,g,b,amount){
  return `rgba(${Math.floor(r*amount)}, ${Math.floor(g*amount)}, ${Math.floor(b*amount)}, 1)`;
}

/* GRADIENTE DINÁMICO */
function setDynamicGradient(imageSrc){
  const img = new Image();
  img.crossOrigin = "anonymous";
  img.src = imageSrc;

  img.onload = function(){
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");

    canvas.width = img.width;
    canvas.height = img.height;
    ctx.drawImage(img, 0, 0);

    const c = ctx.getImageData(img.width/2, img.height/2, 1, 1).data;

    const dark1 = darkenColor(c[0], c[1], c[2], 0.40);
    const dark2 = darkenColor(c[0], c[1], c[2], 0.20);

    const mid1  = darkenColor(c[0], c[1], c[2], 0.55);
    const mid2  = darkenColor(c[0], c[1], c[2], 0.35);

    floatingPlayer.style.background =
      `linear-gradient(135deg, ${dark1}, ${dark2})`;

    document.querySelector(".fp-play-circle").style.background =
      `linear-gradient(135deg, ${dark1}, ${dark2})`;

    playAllBtn.style.background =
      `linear-gradient(135deg, ${mid1}, ${mid2})`;
  };
}

/* PROGRESO */
player.addEventListener("timeupdate", () => {
  if (!player.duration || isDraggingProgress) return;
  const percent = (player.currentTime / player.duration) * 100;
  fpProgress.style.width = percent + "%";
  fpProgressThumb.style.left = percent + "%";
});

function seekFromClientX(clientX){
  const rect = fpProgressContainer.getBoundingClientRect();
  let x = clientX - rect.left;
  x = Math.max(0, Math.min(rect.width, x));
  const percent = x / rect.width;

  if (player.duration) {
    player.currentTime = percent * player.duration;
  }

  const percent100 = percent * 100;
  fpProgress.style.width = percent100 + "%";
  fpProgressThumb.style.left = percent100 + "%";
}

fpProgressContainer.addEventListener("mousedown", (e) => {
  e.stopPropagation();
  isDraggingProgress = true;
  seekFromClientX(e.clientX);
});

document.addEventListener("mousemove", (e) => {
  if (!isDraggingProgress) return;
  seekFromClientX(e.clientX);
});

document.addEventListener("mouseup", () => {
  isDraggingProgress = false;
});

/* Touch */
fpProgressContainer.addEventListener("touchstart", (e) => {
  e.stopPropagation();
  isDraggingProgress = true;
  seekFromClientX(e.touches[0].clientX);
}, {passive:true});

document.addEventListener("touchmove", (e) => {
  if (!isDraggingProgress) return;
  seekFromClientX(e.touches[0].clientX);
}, {passive:true});

document.addEventListener("touchend", () => {
  isDraggingProgress = false;
});

/* SIGUIENTE / ANTERIOR */
document.getElementById("fp-next").addEventListener("click", (e) => {
  e.stopPropagation();
  const nextIndex = (currentIndex + 1) % trackElements.length;
  playIndex(nextIndex, "forward");
});

document.getElementById("fp-prev").addEventListener("click", (e) => {
  e.stopPropagation();
  const prevIndex = (currentIndex - 1 + trackElements.length) % trackElements.length;
  playIndex(prevIndex, "backward");
});

/* REPETIR / ALEATORIO */
fpRepeatBtn.addEventListener("click", (e) => {
  e.stopPropagation();
  repeat = !repeat;
  fpRepeatBtn.classList.toggle("active", repeat);
});

fpShuffleBtn.addEventListener("click", (e) => {
  e.stopPropagation();
  shuffle = !shuffle;
  fpShuffleBtn.classList.toggle("active", shuffle);
});

player.addEventListener("ended", () => {
  if (repeat) {
    playIndex(currentIndex, "forward");
    return;
  }
  if (shuffle) {
    const randomIndex = Math.floor(Math.random() * trackElements.length);
    playIndex(randomIndex, "forward");
    return;
  }
  const nextIndex = (currentIndex + 1) % trackElements.length;
  playIndex(nextIndex, "forward");
});

/* PLAY / PAUSA */
fpPlayBtn.addEventListener("click", (e) => {
  e.stopPropagation();
  if (player.paused) {
    player.play();
    updatePlayIcon(true);
  } else {
    player.pause();
    updatePlayIcon(false);
  }
});

function updatePlayIcon(isPlaying){
  if (isPlaying) {
    fpPlayIcon.innerHTML = '<path d="M7 5h3v14H7zM14 5h3v14h-3z"/>';
  } else {
    fpPlayIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
  }
}

player.addEventListener("play", () => updatePlayIcon(true));
player.addEventListener("pause", () => updatePlayIcon(false));

/* EXPANDIR */
floatingPlayer.addEventListener("click", (e) => {
  if (e.target.closest(".fp-btn") || 
      e.target.closest("#fp-close") || 
      e.target.closest("#fp-collapse") ||
      e.target.closest("#fp-progress-container")) return;

  floatingPlayer.classList.toggle("expanded");
});
</script>
